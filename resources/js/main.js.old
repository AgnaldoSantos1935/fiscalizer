// ====================================================
// üåê main.js ‚Äî ponto de entrada (Vite) do Fiscalizer
// ====================================================

// Utilidades
import { showToast, confirmarAcao, setupToastrDefaults } from './utils/notifications';
import { applyMasksDelegation } from './utils/masks';
import { formatarMoeda } from './utils/helpers';

// Integra√ß√µes
import { wireCepAutoFill } from './integrations/viacep';
import { wireCnpjAutoFill } from './integrations/brasilapi';
import { bootIbgeHelpers } from './integrations/ibge';

// M√≥dulos de UI (somente se a p√°gina tiver os elementos)
import { inicializarModaisHosts } from './modules/modaisHosts';
import { inicializarModaisContratos } from './modules/modaisContratos';
import { bootFiscalizerAutocomplete } from './modules/fiscalizerAutocomplete';

// =======================
// ‚ú® Inicializa√ß√£o global
// =======================
document.addEventListener('DOMContentLoaded', () => {
  setupToastrDefaults();
  applyMasksDelegation();
  wireCepAutoFill();
  wireCnpjAutoFill();
  bootIbgeHelpers();
  bootFiscalizerAutocomplete();

  // Inicializa√ß√µes condicionais (evita erros em p√°ginas sem os modais)
  if (document.querySelector('[data-modal-hosts]')) {
    inicializarModaisHosts();
  }
  if (document.querySelector('[data-modal-contratos]')) {
    inicializarModaisContratos();
  }

  // Namespace global (opcional/legado)
  window.Fiscalizer = window.Fiscalizer || {};
  window.Fiscalizer.utils = { showToast, confirmarAcao, formatarMoeda };

  console.info('%c[Fiscalizer] main.js carregado com sucesso', 'color: #22c55e; font-weight: 700;');
});
